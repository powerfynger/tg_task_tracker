# Описание проекта

Этот проект представляет собой трекер задач с возможностью указания, какие задачи были затронуты сегодня, а также планирования задач на завтра. Бэкенд написан на Flask, а единственным интерфейсом на данный момент является бот в Telegram.

## Основные возможности:

- Создание, редактирование и удаление задач.
- Учет дней, потраченных на выполнение задач.
- Планирование задач на завтра.
- Возможность отметить задачи, выполненные сегодня.
- Ведение списка пользователей.

## Структура проекта

Проект состоит из двух основных компонентов:

**1. Бэкенд на Flask**

Бэкенд реализован с использованием Flask и предоставляет API для управления задачами и пользователями. Он включает следующие основные компоненты:

- **Основные модули и их функции:**
    - Blueprints:
        - `tasks_bp`: обработка запросов, связанных с задачами (создание, получение, обновление, удаление задач).
        - `users_bp`: обработка запросов, связанных с пользователями (создание, получение, обновление, удаление пользователей).

- **Маршруты (Endpoints):**
    - `/users` [GET]: получение всех пользователей.
    - `/user` [POST]: создание нового пользователя.
    - `/user/<int:user_id>` [GET]: получение пользователя по ID.
    - `/user/<int:user_id>` [PUT]: обновление информации о пользователе.
    - `/user/<int:user_id>` [DELETE]: удаление пользователя.
    - `/tasks` [GET]: получение всех задач.
    - `/tasks/<int:tg_id>` [GET]: получение задач пользователя по его Telegram ID.
    - `/task` [POST]: создание новой задачи.
    - `/task/<int:task_id>` [GET]: получение задачи по ID.
    - `/task/<int:task_id>` [PUT]: обновление задачи.
    - `/task/<int:task_id>` [DELETE]: удаление задачи.
- **Модели данных:**
    - `User`: модель пользователя с атрибутами `id`, `username`, `tg_id`, `last_time_interaction`, `tasks_completed`.
    - `Task`: модель задачи с атрибутами `id`, `title`, `description`, `days_spent`, `deadline`, `priority`, `planned_for_tomorrow`, `user_id`.
- **Таймеры:**
    - Очистка запланированных задач всех пользователей каждые сутки

**2. Телеграм-бот**

Телеграм-бот предоставляет интерфейс для взаимодействия с пользователем. Он реализован с использованием библиотеки `python-telegram-bot`.

- **Основные функции бота:**
    - **Команды:**
        - `/start`: регистрация пользователя и приветственное сообщение.
        - `/help`: отображение списка доступных команд.
        - `/tasks`: просмотр всех задач пользователя.
        - `/create`: создание новой задачи.
        - `/delete`: удаление задачи.
        - `/edit`: редактирование задачи.
        - `/plan`: планирование задач на завтра.
        - `/daily`: просмотр задач, запланированных на сегодня.
    - **Обработчики:**
        - `start(update, context)`: обработка команды `/start`.
        - `help_command(update, context)`: обработка команды `/help`.
        - `tasks_command(update, context)`: обработка команды `/tasks`.
        - `create_task_command(update, context)`: обработка команды `/create`.
        - `get_description(update, context)`: получение описания задачи.
        - `save_task(update, context)`: сохранение новой задачи.
        - `edit_task(update, context)`: редактирование существующей задачи.
        - `edit_task_command(update, context)`: выбор задачи для редактирования.
        - `delete_task_command(update, context)`: выбор задачи для удаления.
        - `mark_task_command(tg_id)`: отметка задач, выполненных сегодня.
        - `toggle_task(update, context)`: переключение состояния задачи.
        - `cancel_button(update, context)`: отмена текущего действия.
        - `handle_text(update, context)`: обработка текстовых сообщений.
- **Таймеры:**
    - Отправка опроса о задачах, которыми пользователи сегодня занимались, для сбора статистики и генерации персональных отчётов (в разработке)



## Запуск проекта

**1. Установка зависимостей**

Установите необходимые зависимости с помощью pip:

```bash
pip install -r requirements.txt
```

**2. Настройка**

Создайте файл конфигурации `.env` и добавьте необходимые переменные окружения:

```plaintext
API_KEY_BACKEND=your_api_key
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
```

**3. Запуск сервера и бота**

```bash
python run.py
```

